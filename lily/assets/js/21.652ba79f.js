(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{377:function(t,e,a){"use strict";a.r(e);var v=a(45),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"abp-框架-mvc-应用程序的项目结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abp-框架-mvc-应用程序的项目结构"}},[t._v("#")]),t._v(" ABP 框架 MVC 应用程序的项目结构")]),t._v(" "),a("blockquote",[a("p",[t._v("首先新建一个解决方案")]),t._v(" "),a("p",[t._v("abp new Acme.BookStore -t app")])]),t._v(" "),a("h2",{attrs:{id:"解决方案结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案结构"}},[t._v("#")]),t._v(" 解决方案结构")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.abp.io/zh-Hans/abp/latest/Startup-Templates/Application",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"默认结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认结构"}},[t._v("#")]),t._v(" 默认结构")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2020/11/03/B6Pgv4.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("项目依赖结构")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2020/11/03/B6P5Ux.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"项目介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目介绍"}},[t._v("#")]),t._v(" 项目介绍")]),t._v(" "),a("h4",{attrs:{id:"domain-shared-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domain-shared-项目"}},[t._v("#")]),t._v(" .Domain.Shared 项目")]),t._v(" "),a("p",[t._v("该项目中包含"),a("code",[t._v("常量")]),t._v(" "),a("code",[t._v("枚举")]),t._v(" 等 "),a("code",[t._v("其他对象")]),t._v(" ,他其实是"),a("code",[t._v("domain")]),t._v(" 层的一部分, 但是解决方案中的"),a("strong",[t._v("所有层/项目都可使用")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("该项目不依赖于解决方案中的人任意一项, 其他项目都可直接或间接依赖于此")])])]),t._v(" "),a("h4",{attrs:{id:"domain-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domain-项目"}},[t._v("#")]),t._v(" .Domain 项目")]),t._v(" "),a("p",[t._v("这是解决方案的领域层 , 主要包括 "),a("code",[t._v("entities(实体)")]),t._v(" "),a("code",[t._v("aggregate roots(聚合跟)")]),t._v(" "),a("code",[t._v("domain service(领域服务)")]),t._v(" "),a("code",[t._v("value type(值类型)")]),t._v(" "),a("code",[t._v("repository interfaces(仓储层接口)")]),t._v(" 和 "),a("code",[t._v("other domain projects")])]),t._v(" "),a("h4",{attrs:{id:"application-contracts-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-contracts-项目"}},[t._v("#")]),t._v(" .Application.Contracts 项目")]),t._v(" "),a("p",[t._v("该项目包含"),a("code",[t._v("application service interfaces(应用程序服务接口)")]),t._v(" 和 "),a("code",[t._v("Data Transfer Objects(DTO 应用程序层的数据传输对象)")]),t._v(" . 它以分离应用程序层的接口和实现 , 这样可以将接口项目作为"),a("code",[t._v("contract package(合同包)")]),t._v("共享给客户")]),t._v(" "),a("h4",{attrs:{id:"application-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-项目"}},[t._v("#")]),t._v(" .Application 项目")]),t._v(" "),a("p",[t._v("该项目实现 "),a("code",[t._v(".Application.Contracts")]),t._v(" 项目中定义的接口")]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".Application.Contracts")]),t._v(" 项目用于实现接口和使用 "),a("code",[t._v("DTO")])]),t._v(" "),a("li",[t._v("依赖于 "),a("code",[t._v(".Domain")]),t._v(" 项目以便可以使用 "),a("code",[t._v("entities")]),t._v(" "),a("code",[t._v("repository interfaces")]),t._v(" 等 . 用于实现程序的业务逻辑")])]),t._v(" "),a("h4",{attrs:{id:"entityframeworkcore-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entityframeworkcore-项目"}},[t._v("#")]),t._v(" .EntityFrameworkCore 项目")]),t._v(" "),a("p",[t._v("该项目定义了 "),a("code",[t._v("DbContext")]),t._v(" 并实现了 "),a("code",[t._v(".Domain")]),t._v(" 项目中定义的仓储接口")]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".Domain")]),t._v(" 项目, 能够引用"),a("code",[t._v("entities")]),t._v(" 和 "),a("code",[t._v("repository interfaces")])])]),t._v(" "),a("h4",{attrs:{id:"entityframeworkcore-dbmigrations-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entityframeworkcore-dbmigrations-项目"}},[t._v("#")]),t._v(" .EntityFrameworkCore.DbMigrations 项目")]),t._v(" "),a("p",[t._v("EF Core 的数据库迁移，拥有单独的DbContext 专门用于数据库迁移")]),t._v(" "),a("blockquote",[a("p",[t._v("ABP是一个模块化框架，具有理想的设计，每个模块都用自己的"),a("code",[t._v("DbContext")]),t._v("类，将所有"),a("code",[t._v("DbContext")]),t._v("统一为一个模型,以便维护单个数据库架构(这里都是"),a("code",[t._v("Code First")]),t._v(")")])]),t._v(" "),a("blockquote",[a("p",[t._v("note: 仅在数据库迁移时使用 不能在运行时使用")])]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".EntityFrameworkCore")]),t._v(" 项目")])]),t._v(" "),a("blockquote",[a("p",[t._v("只有将EF Core用作数据库提供程序时此项目才有用")])]),t._v(" "),a("h4",{attrs:{id:"dbmigrator-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dbmigrator-项目"}},[t._v("#")]),t._v(" .DbMigrator 项目")]),t._v(" "),a("p",[t._v("这是一个控制台应用程序,可简化在开发和生产环境上执行数据库迁移的过程")]),t._v(" "),a("ul",[a("li",[t._v("用于创建数据库")]),t._v(" "),a("li",[t._v("应用数据库迁移")]),t._v(" "),a("li",[t._v("初始化数据库数据")])]),t._v(" "),a("blockquote",[a("p",[t._v("该项目是一个独立的项目 拥有自己的application.json 文件")])]),t._v(" "),a("ul",[a("li",[t._v("依赖于"),a("code",[t._v(".EntityFrameworkCore.DbMigrations")]),t._v("项目（对于EF Core），因为它需要访问迁移。")]),t._v(" "),a("li",[t._v("依赖于"),a("code",[t._v(".Application.Contracts")]),t._v("项目，以便能够访问权限定义，因为默认情况下初始数据播种程序会授予admin角色所有权限。")])]),t._v(" "),a("h4",{attrs:{id:"httpapi-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#httpapi-项目"}},[t._v("#")]),t._v(" .HttpApi 项目")]),t._v(" "),a("p",[t._v("该项目用于定义"),a("code",[t._v("API Controllers")])]),t._v(" "),a("blockquote",[a("p",[t._v("大多数时候不用手动创建API控制器 , ABP 的 "),a("a",{attrs:{href:"https://docs.abp.io/zh-Hans/abp/latest/API/Auto-API-Controllers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Auto API Controllers"),a("OutboundLink")],1),t._v(" 会根据你的Application自动创建他们")])]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".Application.Contracts")]),t._v(" 项目")])]),t._v(" "),a("h4",{attrs:{id:"httpapi-client-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#httpapi-client-项目"}},[t._v("#")]),t._v(" .HttpApi.Client 项目")]),t._v(" "),a("p",[t._v("这是一个使用C#定义的客户端代理程序 , 以便使用 "),a("code",[t._v(".HttpApi")]),t._v(" 这个项目. 也可以将此库共享给第三方客户端,这样就可以访问 "),a("code",[t._v(".HttpApi")]),t._v(" 了")]),t._v(" "),a("blockquote",[a("p",[t._v("大多数时候不需要手动创建C#客户端程序 ,这要感谢 ABP的 "),a("a",{attrs:{href:"https://docs.abp.io/zh-Hans/abp/latest/API/Dynamic-CSharp-API-Clients",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dynamic C# API Clients"),a("OutboundLink")],1),t._v(" 功能")])]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".Application.Contracts")])])]),t._v(" "),a("h4",{attrs:{id:"web-项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-项目"}},[t._v("#")]),t._v(" .Web 项目")]),t._v(" "),a("p",[t._v("该项目包含应用程序的用户界面(UI) 包含 "),a("code",[t._v("Razor pages")]),t._v(" "),a("code",[t._v("Js")]),t._v(" "),a("code",[t._v("css")]),t._v(" "),a("code",[t._v("image")]),t._v(" 等")]),t._v(" "),a("ul",[a("li",[t._v("依赖于 "),a("code",[t._v(".HttpApi")]),t._v(" 项目, 因为UI层需要使用"),a("code",[t._v("APIs")]),t._v("和"),a("code",[t._v("application service interfaces")])])]),t._v(" "),a("h4",{attrs:{id:"test-projects-测试项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-projects-测试项目"}},[t._v("#")]),t._v(" Test Projects (测试项目)")]),t._v(" "),a("p",[t._v("多个测试项目 , 每层一个")]),t._v(" "),a("ul",[a("li",[a("code",[t._v(".Domain.Tests")]),t._v(" 测试领域层")]),t._v(" "),a("li",[a("code",[t._v(".Application.Tests")]),t._v(" 测试应用程序")]),t._v(" "),a("li",[a("code",[t._v(".EntityFrameworkCore.Tests")]),t._v(" 测试EF Core 和 repositories")]),t._v(" "),a("li",[a("code",[t._v(".Web.Tests")]),t._v(" 测试UI")]),t._v(" "),a("li",[a("code",[t._v(".TestBase")]),t._v(" 这是所有测试项目的基础项目")])])])}),[],!1,null,null,null);e.default=_.exports}}]);